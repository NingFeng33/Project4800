<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/css/manager.css">
  <title>Course Scheduling System</title>
</head>
<body>
  <!-- Top Bar -->
  <%- include('partials/top_bar') %>
  <!-- Sidebar -->
  <%- include('partials/side_bar') %>
  
  <main class="main-content">
  <div class="container">
    <h1>BCIT ATC Course Scheduling System</h1>
  
    <div class="form-section">
      <h2>Add New Course</h2>
      <form action="/courses" method="POST">
        <label for="courseCode">Course Code:</label>
        <input type="text" name="courseCode" required>
  
        <label for="courseName">Course Name:</label>
        <input type="text" name="courseName" required>
  
        <label for="programName">Program Name:</label>
        <input type="text" name="programName" required>
  
        <label for="startDate">Start Date:</label>
        <input type="date" name="startDate" required>
  
        <label for="endDate">End Date:</label>
        <input type="date" name="endDate" required>
  
        <button type="submit">Add Course</button>
      </form>
    </div>
  
    <div class="form-section">
      <h2>Add New Room</h2>
      <form action="/rooms" method="POST">
        <label for="roomNumber">Room Number:</label>
        <input type="text" name="roomNumber" required>
      
        <label for="capacity">Capacity:</label> 
        <input type="number" name="capacity" required> 
      
        <button type="submit">Add Room</button>
      </form>
    </div>
  
    <div class="filter-container">
      <input type="text" id="search-manager" placeholder="Search Courses..." oninput="filterAndSearch()">
      
      <select id="program-filter" onchange="filterAndSearch()">
        <option value="">All Programs</option>
        <% programs.forEach(program => { %>
            <option value="<%= program.program_name %>"><%= program.program_name %></option>
        <% }) %>
      </select>
    </div>
    <h2>Courses</h2>
    <div class="pagination" id="course-pagination">
      <button id="prev-course" onclick="prevPageCourse()">Previous</button>
      <span>Page <span id="current-course-page">1</span> of <span id="total-course-pages">1</span></span>
      <button id="next-course" onclick="nextPageCourse()">Next</button>
    </div>
    <table>
      <thead>
        <tr>
          <th>Course Code</th>
          <th>Course Name</th>
          <th>Program</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="course-table-body">
        <% courses.forEach(course => { %>
          <tr>
            <td><%= course.course_code %></td>
            <td><%= course.course_name %></td>
            <td><%= course.Program ? course.Program.program_name : 'N/A' %></td>
            <td>
              <button onclick="deleteCourse(course.course_id)">Delete</button>
          </td>          
          </tr>
        <% }) %>
      </tbody>
    </table>
  
    <h2>Rooms</h2>
    <div class="pagination" id="room-pagination">
      <button id="prev-room" onclick="prevPageRoom()">Previous</button>
      <span>Page <span id="current-room-page">1</span> of <span id="total-room-pages">1</span></span>
      <button id="next-room" onclick="nextPageRoom()">Next</button>
    </div>
    <table>
      <thead>
        <tr>
          <th>Room Number</th>
          <th>Capacity</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="room-table-body">
        <% rooms.forEach(room => { %>
          <tr>
            <td><%= room.room_number %></td>
            <td><%= room.capacity %></td>
            <td>
              <button onclick="deleteRoom(room.room_id)">Delete</button>
          </td>          
          </tr>
        <% }) %>
      </tbody>
    </table>
  
    <footer>
      <p>&copy; 2024 Course Scheduling System</p>
    </footer>
  </div>
  </main>
  
  <script src="/scripts/manager.js"></script>
</body>
</html>
